# kafka可靠性保证

 ## kafka有以下保证：

	1. kafka保证分区消息顺序，如果同一个生产者向同一个分区中写入消息先写入消息A，然后写入消息B，kafka保证B的偏移量比A的大。也就是说明，消费者会小读到消息A，然后读到B。
 	2. 只有当消息写入全部同步副本以后才会算是已提交。
 	3. 只要有一个副本还是活跃的，消息就不会丢失。
 	4. 消费者只能读到已经提交的消息。

## kafka的复制

​	kafka的主题被分为多个分区，分区是基本的数据块。

	1. 同步副本的前提：和zookeeper之间有一个活跃的会话(过去的6s内可以配置)，就是发送过心跳
 	2. 过去的10S内从首领哪里获取过最新的消息。
 	3. 在过去的10S内从首领哪里获取最新消息是0延迟的

## kafka的复制系数

​	默认复制系数是3