# redis--- 集群 哨兵模式

1. 哨兵只是一个运行在**特殊模式下的redis服务器**。它使用的命令模式和普通的服务器不同所以可以执行的命令就不同了。
2. 哨兵需要读取用户指定的master服务器的信息。然后启动以后需要和主服务器创建(异步)命令链接和订阅链接。ps：需要两个链接的原因是：redis的发布订阅功能中，被发送的消息是不会保存的，**<font color='red'>所以哨兵了为不丢失这个频道的消息就需要订阅这个频道</font>**。![image-20190820215604662](../images/image-20190820215604662.png)
   图中所示就是有两个链接的原因，因为命令也是通过频道发送到服务器的。
3. 哨兵通过向主服务器发送INFO命令来获取slave信息。**得到从服务器信息以后也会创建命令链接和订阅链接**。
4. **默认情况下，哨兵10s一次**向被监视的主服务器和从服务器发送INFO命令。如果正在发送**故障转移就改为1s**一次
5. 对于监视同一个主服务器的哨兵来说